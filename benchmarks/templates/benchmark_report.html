{% extends "email_base.html" %}

{% block content %}

    <h1>{{ header }}</h1>
    <h2>{{ time }}</h2>

    <h3>Change: <a href="{{ current.build_url }}">{{ current.build_id }}#{{ current.name }}</a></h3>
    <ul>
        <li>Gerrit change: <a href="{{ current.gerrit_change_url }}">{{ current.gerrit_change_number }}/{{ current.gerrit_patchset_number }}</a>
        <li>Jenkins build: <a href="{{ current.build_url }}">{{ current.build_number }}</a>
    </ul>
    <h4>Baseline: <a href="{{ previous.build_url }}">{{ previous.build_id }}#{{ previous.name }}</a></h4>
    <ul>
        <li>Jenkins build: <a href="{{ previous.build_url }}">{{ previous.build_number }}</a>
    </ul>

    <br/>
    <hr/>

    <h3>branch: {{ current.branch_name }}</h3>

    <table class="benchmarks-results">
        <tr>
            <td style="width: 60%">benchmark name (sample count)</td>
            <td style="text-align:right; width:100%">
                Current (stdev)
            </td>
            <td style="text-align:right">
                Last (stdev)
            </td>
            <td style="text-align:right">change</td>
        </tr>

        {% for result in results %}
            <tr style="border-bottom: 1px solid #ddd;">
                <td style="width: 60%">
                    {{ result.current.benchmark.name }} / <b>{{ result.current.name }}</b>
                    ({{ result.current.values | length }})
                </td>
                <td align="right" style="text-align:right; width:100%">
                    {{ result.current.measurement|floatformat:2 }} <br/>
                    ({{ result.current.stdev|floatformat:2 }})
                </td>
                <td align="right" style="text-align:right; min-width: 100px;">
                    {{ result.previous.measurement|floatformat:2 }} <br/>
                    ({{ result.previous.stdev|floatformat:2 }})
                </td>
                <td align="right" style="text-align:right; min-width: 100px;">
                    {% if result.change > 0 %}
                        <span style="color:#77DD77">{{ result.change|floatformat:3 }}%</span>
                    {% elif result.change < 0 %}
                        <span style="color:#FF6961">{{ result.change|floatformat:3 }}%</span>
                    {% else %}
                        ---
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
    </table>

{% endblock %}
